<!doctype html>
<html lang="en" xmlns:th="http://thymeleaf.org">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
              integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
              crossorigin="anonymous">

        <!-- CKEditor 5 -->
        <script src="https://cdn.ckeditor.com/ckeditor5/22.0.0/decoupled-document/ckeditor.js"></script>

        <title>Hello, world!</title>
    </head>
    <body>
        <div class="container">
            <h1>Hello, world!</h1>

            <form action="/" method="post" id="questionForm">
                <div class="form-group">
                    <label for="text">Gap Filling Question <span style="font-size: 0.7em;font-style: italic">(enter a gap with XXX)</span></label>
                    <input type="text" class="form-control" th:field="${gapFillingQuestion.text}" id="text">
                </div>

                <div class="form-group">
                    <label for="hint">Question's Hint</label>
                    <input type="text" class="form-control" th:field="${gapFillingQuestion.hint}" id="hint">
                </div>

                <div class="form-group">
                    <label for="answer">Answer</label>
                    <input type="text" class="form-control" th:field="${gapFillingQuestion.hint}" id="answer">
                </div>

                <!-- The CKEditor and The toolbar will be rendered in this container. -->
                <div class="form-group">
                    <label for="toolbar-container">Description</label>
                    <div id="toolbar-container"></div>
                    <div id="editor" th:utext="${gapFillingQuestion.description}">
                        <p>This is some sample content.</p>
                    </div>

                    <script>
                        DecoupledEditor
                            .create(document.querySelector('#editor'))
                            .then(editor => {
                                const toolbarContainer = document.querySelector('#toolbar-container');

                                toolbarContainer.appendChild(editor.ui.view.toolbar.element);
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    </script>
                </div>

                <div>
                    <button type="button" id="saveButton" class="btn btn-primary">Save</button>
                    <button type="button" id="saveAndNewButton" class="btn btn-primary">Save & New</button>
                    <button type="button" class="btn btn-info" id="back">Back</button>
                </div>
            </form>
        </div>


        <script>
            document.getElementById("saveButton").addEventListener("click", function () {
                let questionForm = document.getElementById("questionForm");
                let descriptionInputText = document.createElement("input");
                descriptionInputText.name = "description";
                descriptionInputText.type = "text";
                descriptionInputText.value = document.getElementById("editor").innerHTML;
                questionForm.appendChild(descriptionInputText);
                document.getElementById("questionForm").submit();
            });
        </script>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"
                integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
                crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
                integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
                crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
                integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
                crossorigin="anonymous"></script>
    </body>
</html>